{
  "feature_id": "PD-0001",
  "title": "GitHub Review by sourcery-ai[bot]",
  "summary": "Hey - I've found 4 issues, and left some high level feedback:\n\n- In `app.config.Settings.cors_origins_list`, consider filtering out empty entries after splitting (e.g. from trailing commas or empty `CORS_ORIGINS`) so you don't end up with `\"\"` as an allowed origin.\n- In `app.database.get_db`, update the return type to `AsyncGenerator[AsyncSession, None]` to fully specify the yield and send types and avoid mypy complaining about a missing second type argument.\n- Because `async_engine` is created at import time from `settings.DATABASE_URL`, it‚Äôs hard to reconfigure the database URL dynamically (e.g. in different test scenarios); consider wrapping engine creation in a small factory or lazy initializer if you anticipate needing different connection strings in-process.\n\n<details>\n<summary>Prompt for AI Agents</summary>\n\n~~~markdown\nPlease address the comments from this code review:\n\n## Overall Comments\n- In `app.config.Settings.cors_origins_list`, consider filtering out empty entries after splitting (e.g. from trailing commas or empty `CORS_ORIGINS`) so you don't end up with `\"\"` as an allowed origin.\n- In `app.database.get_db`, update the return type to `AsyncGenerator[AsyncSession, None]` to fully specify the yield and send types and avoid mypy complaining about a missing second type argument.\n- Because `async_engine` is created at import time from `settings.DATABASE_URL`, it‚Äôs hard to reconfigure the database URL dynamically (e.g. in different test scenarios); consider wrapping engine creation in a small factory or lazy initializer if you anticipate needing different connection strings in-process.\n\n## Individual Comments\n\n### Comment 1\n<location path=\"backend/app/config.py\" line_range=\"20-23\" />\n<code_context>\n+    JWT_SECRET: str\n+    JWT_ACCESS_EXPIRE_MINUTES: int = 30\n+    JWT_REFRESH_EXPIRE_DAYS: int = 7\n+    CORS_ORIGINS: str = \"http://localhost:3000\"\n+    WS_INITIAL_HOURS: int = 1\n+    GITHUB_TOKEN: str | None = None\n+    LOG_LEVEL: str = \"INFO\"\n+\n+    @property\n+    def cors_origins_list(self) -> list[str]:\n+        \"\"\"Split comma-separated CORS_ORIGINS into a list.\"\"\"\n+        return [origin.strip() for origin in self.CORS_ORIGINS.split(\",\")]\n+\n+\n</code_context>\n<issue_to_address>\n**suggestion:** Filter out empty CORS origins when splitting the comma-separated string.\n\nIf `CORS_ORIGINS` has a trailing or double comma, this will produce empty-string entries that get passed to the middleware. Consider filtering out empty values, e.g. `return [o.strip() for o in self.CORS_ORIGINS.split(',') if o.strip()]`.\n\n```suggestion\n    @property\n    def cors_origins_list(self) -> list[str]:\n        \"\"\"Split comma-separated CORS_ORIGINS into a list, filtering out empty values.\"\"\"\n        return [origin.strip() for origin in self.CORS_ORIGINS.split(\",\") if origin.strip()]\n```\n</issue_to_address>\n\n### Comment 2\n<location path=\"backend/app/config.py\" line_range=\"11\" />\n<code_context>\n+\n+    model_config = SettingsConfigDict(env_file=\".env\", env_file_encoding=\"utf-8\")\n+\n+    DATABASE_URL: str = \"postgresql+asyncpg://dev:dev@localhost:5432/statusboard\"\n+    JWT_SECRET: str\n+    JWT_ACCESS_EXPIRE_MINUTES: int = 30\n</code_context>\n<issue_to_address>\n**üö® suggestion (security):** Avoid hardcoding database credentials in the default `DATABASE_URL`.\n\nEven for dev defaults, storing real usernames/passwords in code can normalize this pattern and risks accidental use outside dev. Prefer a placeholder URL without real credentials, or derive the URL from separate env vars (user, password, host, db) at runtime.\n\n```suggestion\n    # Use placeholder values by default; override via environment variables in .env or the environment.\n    DATABASE_URL: str = \"postgresql+asyncpg://USER:PASSWORD@localhost:5432/statusboard\"\n```\n</issue_to_address>\n\n### Comment 3\n<location path=\"backend/tests/unit/test_config.py\" line_range=\"40-49\" />\n<code_context>\n+            Settings(_env_file=None)  # type: ignore[call-arg]\n+\n+\n+class TestCorsOriginsListSplitsCommaSeparated:\n+    \"\"\"cors_origins_list returns split list from comma-separated string.\"\"\"\n+\n+    def test_cors_origins_list_splits_comma_separated(\n+        self, monkeypatch: pytest.MonkeyPatch\n+    ) -> None:\n+        monkeypatch.setenv(\"JWT_SECRET\", \"test-secret\")\n+        monkeypatch.setenv(\"CORS_ORIGINS\", \"http://localhost:3000,http://localhost:3001\")\n+\n+        s = Settings(_env_file=None)  # type: ignore[call-arg]\n+\n+        assert s.cors_origins_list == [\n+            \"http://localhost:3000\",\n+            \"http://localhost:3001\",\n</code_context>\n<issue_to_address>\n**suggestion (testing):** Add tests for edge cases in `cors_origins_list` such as whitespace and empty values.\n\nCurrently we only assert basic splitting. Please also add cases for:\n- Values with spaces, e.g. `\"http://localhost:3000, http://localhost:3001\"`, to verify whitespace is stripped.\n- Empty entries from trailing or multiple commas, e.g. `\"http://localhost:3000,\"` or `\",\"`, and either ensure empty strings are filtered out or clearly document the behavior so `\"\"` doesn‚Äôt unintentionally appear in the allowed origins list.\n\nSuggested implementation:\n\n```python\nclass TestCorsOriginsListSplitsCommaSeparated:\n    \"\"\"cors_origins_list returns split list from comma-separated string.\"\"\"\n\n    def test_cors_origins_list_splits_comma_separated(\n        self, monkeypatch: pytest.MonkeyPatch\n    ) -> None:\n        monkeypatch.setenv(\"JWT_SECRET\", \"test-secret\")\n        monkeypatch.setenv(\"CORS_ORIGINS\", \"http://localhost:3000,http://localhost:3001\")\n\n        s = Settings(_env_file=None)  # type: ignore[call-arg]\n\n        assert s.cors_origins_list == [\n            \"http://localhost:3000\",\n            \"http://localhost:3001\",\n        ]\n\n    def test_cors_origins_list_strips_whitespace(\n        self, monkeypatch: pytest.MonkeyPatch\n    ) -> None:\n        \"\"\"Values with spaces are stripped.\"\"\"\n        monkeypatch.setenv(\"JWT_SECRET\", \"test-secret\")\n        monkeypatch.setenv(\n            \"CORS_ORIGINS\",\n            \"http://localhost:3000, http://localhost:3001\",\n        )\n\n        s = Settings(_env_file=None)  # type: ignore[call-arg]\n\n        assert s.cors_origins_list == [\n            \"http://localhost:3000\",\n            \"http://localhost:3001\",\n        ]\n\n    def test_cors_origins_list_ignores_empty_entries(\n        self, monkeypatch: pytest.MonkeyPatch\n    ) -> None:\n        \"\"\"Empty entries from trailing or multiple commas are ignored.\"\"\"\n        monkeypatch.setenv(\"JWT_SECRET\", \"test-secret\")\n\n        # Trailing comma\n        monkeypatch.setenv(\"CORS_ORIGINS\", \"http://localhost:3000,\")\n        s = Settings(_env_file=None)  # type: ignore[call-arg]\n\n        assert s.cors_origins_list == [\"http://localhost:3000\"]\n\n        # Multiple commas and empty-only value\n        monkeypatch.setenv(\"CORS_ORIGINS\", \",http://localhost:3000,,\")\n        s = Settings(_env_file=None)  # type: ignore[call-arg]\n\n        assert s.cors_origins_list == [\"http://localhost:3000\"]\n\n```\n\nTo make these tests pass, ensure the `Settings` implementation of `cors_origins_list`:\n1. Splits `CORS_ORIGINS` on commas.\n2. Strips surrounding whitespace from each entry.\n3. Filters out empty strings after stripping.\nA typical implementation would look like:\n```python\n@property\ndef cors_origins_list(self) -> list[str]:\n    if not self.CORS_ORIGINS:\n        return []\n    return [origin.strip() for origin in self.CORS_ORIGINS.split(\",\") if origin.strip()]\n```\nAdjust the attribute name (`CORS_ORIGINS` vs similar) to match your existing `Settings` model.\n</issue_to_address>\n\n### Comment 4\n<location path=\"backend/tests/unit/test_config.py\" line_range=\"30-37\" />\n<code_context>\n+        assert s.LOG_LEVEL == \"INFO\"\n+\n+\n+class TestSettingsRaisesOnMissingJwtSecret:\n+    \"\"\"ValidationError raised when JWT_SECRET is not set.\"\"\"\n+\n+    def test_settings_raises_on_missing_jwt_secret(self, monkeypatch: pytest.MonkeyPatch) -> None:\n+        monkeypatch.delenv(\"JWT_SECRET\", raising=False)\n+\n+        with pytest.raises(ValidationError):\n+            Settings(_env_file=None)  # type: ignore[call-arg]\n+\n</code_context>\n<issue_to_address>\n**suggestion (testing):** Consider also testing behavior when `JWT_SECRET` is present but empty or only whitespace.\n\nSince you already cover the missing case, please also add tests for `JWT_SECRET=\"\"` and `JWT_SECRET=\"   \"` so the expected behavior for empty/whitespace secrets is defined and guarded against regressions.\n\n```suggestion\nclass TestSettingsRaisesOnMissingJwtSecret:\n    \"\"\"ValidationError raised when JWT_SECRET is not set or invalid.\"\"\"\n\n    def test_settings_raises_on_missing_jwt_secret(self, monkeypatch: pytest.MonkeyPatch) -> None:\n        monkeypatch.delenv(\"JWT_SECRET\", raising=False)\n\n        with pytest.raises(ValidationError):\n            Settings(_env_file=None)  # type: ignore[call-arg]\n\n    def test_settings_raises_on_empty_jwt_secret(self, monkeypatch: pytest.MonkeyPatch) -> None:\n        monkeypatch.setenv(\"JWT_SECRET\", \"\")\n\n        with pytest.raises(ValidationError):\n            Settings(_env_file=None)  # type: ignore[call-arg]\n\n    def test_settings_raises_on_whitespace_jwt_secret(self, monkeypatch: pytest.MonkeyPatch) -> None:\n        monkeypatch.setenv(\"JWT_SECRET\", \"   \")\n\n        with pytest.raises(ValidationError):\n            Settings(_env_file=None)  # type: ignore[call-arg]\n```\n</issue_to_address>\n~~~\n\n</details>\n\n***\n\n<details>\n<summary>Sourcery is free for open source - if you like our reviews please consider sharing them ‚ú®</summary>\n\n- [X](https://twitter.com/intent/tweet?text=I%20just%20got%20an%20instant%20code%20review%20from%20%40SourceryAI%2C%20and%20it%20was%20brilliant%21%20It%27s%20free%20for%20open%20source%20and%20has%20a%20free%20trial%20for%20private%20code.%20Check%20it%20out%20https%3A//sourcery.ai)\n- [Mastodon](https://mastodon.social/share?text=I%20just%20got%20an%20instant%20code%20review%20from%20%40SourceryAI%2C%20and%20it%20was%20brilliant%21%20It%27s%20free%20for%20open%20source%20and%20has%20a%20free%20trial%20for%20private%20code.%20Check%20it%20out%20https%3A//sourcery.ai)\n- [LinkedIn](https://www.linkedin.com/sharing/share-offsite/?url=https://sourcery.ai)\n- [Facebook](https://www.facebook.com/sharer/sharer.php?u=https://sourcery.ai)\n\n</details>\n\n<sub>\nHelp me be more useful! Please click üëç or üëé on each comment and I'll use the feedback to improve your reviews.\n</sub>",
  "verdict": "ADDRESSED",
  "tests_checklist": [],
  "code_quality_checklist": [],
  "security_checklist": [],
  "architecture_checklist": [],
  "dry_yagni_checklist": [],
  "fail_fast_checklist": [],
  "defensive_checklist": [],
  "security_findings": [],
  "architecture_findings": [],
  "issues_found": [],
  "suggested_improvements": [],
  "next_steps": [],
  "reviewer": "sourcery-ai[bot]",
  "date": "2026-02-28T21:14:45Z",
  "commit_reference": "",
  "review_type": "external",
  "sequence_number": 1,
  "external_feedback": "Hey - I've found 4 issues, and left some high level feedback:\n\n- In `app.config.Settings.cors_origins_list`, consider filtering out empty entries after splitting (e.g. from trailing commas or empty `CORS_ORIGINS`) so you don't end up with `\"\"` as an allowed origin.\n- In `app.database.get_db`, update the return type to `AsyncGenerator[AsyncSession, None]` to fully specify the yield and send types and avoid mypy complaining about a missing second type argument.\n- Because `async_engine` is created at import time from `settings.DATABASE_URL`, it‚Äôs hard to reconfigure the database URL dynamically (e.g. in different test scenarios); consider wrapping engine creation in a small factory or lazy initializer if you anticipate needing different connection strings in-process.\n\n<details>\n<summary>Prompt for AI Agents</summary>\n\n~~~markdown\nPlease address the comments from this code review:\n\n## Overall Comments\n- In `app.config.Settings.cors_origins_list`, consider filtering out empty entries after splitting (e.g. from trailing commas or empty `CORS_ORIGINS`) so you don't end up with `\"\"` as an allowed origin.\n- In `app.database.get_db`, update the return type to `AsyncGenerator[AsyncSession, None]` to fully specify the yield and send types and avoid mypy complaining about a missing second type argument.\n- Because `async_engine` is created at import time from `settings.DATABASE_URL`, it‚Äôs hard to reconfigure the database URL dynamically (e.g. in different test scenarios); consider wrapping engine creation in a small factory or lazy initializer if you anticipate needing different connection strings in-process.\n\n## Individual Comments\n\n### Comment 1\n<location path=\"backend/app/config.py\" line_range=\"20-23\" />\n<code_context>\n+    JWT_SECRET: str\n+    JWT_ACCESS_EXPIRE_MINUTES: int = 30\n+    JWT_REFRESH_EXPIRE_DAYS: int = 7\n+    CORS_ORIGINS: str = \"http://localhost:3000\"\n+    WS_INITIAL_HOURS: int = 1\n+    GITHUB_TOKEN: str | None = None\n+    LOG_LEVEL: str = \"INFO\"\n+\n+    @property\n+    def cors_origins_list(self) -> list[str]:\n+        \"\"\"Split comma-separated CORS_ORIGINS into a list.\"\"\"\n+        return [origin.strip() for origin in self.CORS_ORIGINS.split(\",\")]\n+\n+\n</code_context>\n<issue_to_address>\n**suggestion:** Filter out empty CORS origins when splitting the comma-separated string.\n\nIf `CORS_ORIGINS` has a trailing or double comma, this will produce empty-string entries that get passed to the middleware. Consider filtering out empty values, e.g. `return [o.strip() for o in self.CORS_ORIGINS.split(',') if o.strip()]`.\n\n```suggestion\n    @property\n    def cors_origins_list(self) -> list[str]:\n        \"\"\"Split comma-separated CORS_ORIGINS into a list, filtering out empty values.\"\"\"\n        return [origin.strip() for origin in self.CORS_ORIGINS.split(\",\") if origin.strip()]\n```\n</issue_to_address>\n\n### Comment 2\n<location path=\"backend/app/config.py\" line_range=\"11\" />\n<code_context>\n+\n+    model_config = SettingsConfigDict(env_file=\".env\", env_file_encoding=\"utf-8\")\n+\n+    DATABASE_URL: str = \"postgresql+asyncpg://dev:dev@localhost:5432/statusboard\"\n+    JWT_SECRET: str\n+    JWT_ACCESS_EXPIRE_MINUTES: int = 30\n</code_context>\n<issue_to_address>\n**üö® suggestion (security):** Avoid hardcoding database credentials in the default `DATABASE_URL`.\n\nEven for dev defaults, storing real usernames/passwords in code can normalize this pattern and risks accidental use outside dev. Prefer a placeholder URL without real credentials, or derive the URL from separate env vars (user, password, host, db) at runtime.\n\n```suggestion\n    # Use placeholder values by default; override via environment variables in .env or the environment.\n    DATABASE_URL: str = \"postgresql+asyncpg://USER:PASSWORD@localhost:5432/statusboard\"\n```\n</issue_to_address>\n\n### Comment 3\n<location path=\"backend/tests/unit/test_config.py\" line_range=\"40-49\" />\n<code_context>\n+            Settings(_env_file=None)  # type: ignore[call-arg]\n+\n+\n+class TestCorsOriginsListSplitsCommaSeparated:\n+    \"\"\"cors_origins_list returns split list from comma-separated string.\"\"\"\n+\n+    def test_cors_origins_list_splits_comma_separated(\n+        self, monkeypatch: pytest.MonkeyPatch\n+    ) -> None:\n+        monkeypatch.setenv(\"JWT_SECRET\", \"test-secret\")\n+        monkeypatch.setenv(\"CORS_ORIGINS\", \"http://localhost:3000,http://localhost:3001\")\n+\n+        s = Settings(_env_file=None)  # type: ignore[call-arg]\n+\n+        assert s.cors_origins_list == [\n+            \"http://localhost:3000\",\n+            \"http://localhost:3001\",\n</code_context>\n<issue_to_address>\n**suggestion (testing):** Add tests for edge cases in `cors_origins_list` such as whitespace and empty values.\n\nCurrently we only assert basic splitting. Please also add cases for:\n- Values with spaces, e.g. `\"http://localhost:3000, http://localhost:3001\"`, to verify whitespace is stripped.\n- Empty entries from trailing or multiple commas, e.g. `\"http://localhost:3000,\"` or `\",\"`, and either ensure empty strings are filtered out or clearly document the behavior so `\"\"` doesn‚Äôt unintentionally appear in the allowed origins list.\n\nSuggested implementation:\n\n```python\nclass TestCorsOriginsListSplitsCommaSeparated:\n    \"\"\"cors_origins_list returns split list from comma-separated string.\"\"\"\n\n    def test_cors_origins_list_splits_comma_separated(\n        self, monkeypatch: pytest.MonkeyPatch\n    ) -> None:\n        monkeypatch.setenv(\"JWT_SECRET\", \"test-secret\")\n        monkeypatch.setenv(\"CORS_ORIGINS\", \"http://localhost:3000,http://localhost:3001\")\n\n        s = Settings(_env_file=None)  # type: ignore[call-arg]\n\n        assert s.cors_origins_list == [\n            \"http://localhost:3000\",\n            \"http://localhost:3001\",\n        ]\n\n    def test_cors_origins_list_strips_whitespace(\n        self, monkeypatch: pytest.MonkeyPatch\n    ) -> None:\n        \"\"\"Values with spaces are stripped.\"\"\"\n        monkeypatch.setenv(\"JWT_SECRET\", \"test-secret\")\n        monkeypatch.setenv(\n            \"CORS_ORIGINS\",\n            \"http://localhost:3000, http://localhost:3001\",\n        )\n\n        s = Settings(_env_file=None)  # type: ignore[call-arg]\n\n        assert s.cors_origins_list == [\n            \"http://localhost:3000\",\n            \"http://localhost:3001\",\n        ]\n\n    def test_cors_origins_list_ignores_empty_entries(\n        self, monkeypatch: pytest.MonkeyPatch\n    ) -> None:\n        \"\"\"Empty entries from trailing or multiple commas are ignored.\"\"\"\n        monkeypatch.setenv(\"JWT_SECRET\", \"test-secret\")\n\n        # Trailing comma\n        monkeypatch.setenv(\"CORS_ORIGINS\", \"http://localhost:3000,\")\n        s = Settings(_env_file=None)  # type: ignore[call-arg]\n\n        assert s.cors_origins_list == [\"http://localhost:3000\"]\n\n        # Multiple commas and empty-only value\n        monkeypatch.setenv(\"CORS_ORIGINS\", \",http://localhost:3000,,\")\n        s = Settings(_env_file=None)  # type: ignore[call-arg]\n\n        assert s.cors_origins_list == [\"http://localhost:3000\"]\n\n```\n\nTo make these tests pass, ensure the `Settings` implementation of `cors_origins_list`:\n1. Splits `CORS_ORIGINS` on commas.\n2. Strips surrounding whitespace from each entry.\n3. Filters out empty strings after stripping.\nA typical implementation would look like:\n```python\n@property\ndef cors_origins_list(self) -> list[str]:\n    if not self.CORS_ORIGINS:\n        return []\n    return [origin.strip() for origin in self.CORS_ORIGINS.split(\",\") if origin.strip()]\n```\nAdjust the attribute name (`CORS_ORIGINS` vs similar) to match your existing `Settings` model.\n</issue_to_address>\n\n### Comment 4\n<location path=\"backend/tests/unit/test_config.py\" line_range=\"30-37\" />\n<code_context>\n+        assert s.LOG_LEVEL == \"INFO\"\n+\n+\n+class TestSettingsRaisesOnMissingJwtSecret:\n+    \"\"\"ValidationError raised when JWT_SECRET is not set.\"\"\"\n+\n+    def test_settings_raises_on_missing_jwt_secret(self, monkeypatch: pytest.MonkeyPatch) -> None:\n+        monkeypatch.delenv(\"JWT_SECRET\", raising=False)\n+\n+        with pytest.raises(ValidationError):\n+            Settings(_env_file=None)  # type: ignore[call-arg]\n+\n</code_context>\n<issue_to_address>\n**suggestion (testing):** Consider also testing behavior when `JWT_SECRET` is present but empty or only whitespace.\n\nSince you already cover the missing case, please also add tests for `JWT_SECRET=\"\"` and `JWT_SECRET=\"   \"` so the expected behavior for empty/whitespace secrets is defined and guarded against regressions.\n\n```suggestion\nclass TestSettingsRaisesOnMissingJwtSecret:\n    \"\"\"ValidationError raised when JWT_SECRET is not set or invalid.\"\"\"\n\n    def test_settings_raises_on_missing_jwt_secret(self, monkeypatch: pytest.MonkeyPatch) -> None:\n        monkeypatch.delenv(\"JWT_SECRET\", raising=False)\n\n        with pytest.raises(ValidationError):\n            Settings(_env_file=None)  # type: ignore[call-arg]\n\n    def test_settings_raises_on_empty_jwt_secret(self, monkeypatch: pytest.MonkeyPatch) -> None:\n        monkeypatch.setenv(\"JWT_SECRET\", \"\")\n\n        with pytest.raises(ValidationError):\n            Settings(_env_file=None)  # type: ignore[call-arg]\n\n    def test_settings_raises_on_whitespace_jwt_secret(self, monkeypatch: pytest.MonkeyPatch) -> None:\n        monkeypatch.setenv(\"JWT_SECRET\", \"   \")\n\n        with pytest.raises(ValidationError):\n            Settings(_env_file=None)  # type: ignore[call-arg]\n```\n</issue_to_address>\n~~~\n\n</details>\n\n***\n\n<details>\n<summary>Sourcery is free for open source - if you like our reviews please consider sharing them ‚ú®</summary>\n\n- [X](https://twitter.com/intent/tweet?text=I%20just%20got%20an%20instant%20code%20review%20from%20%40SourceryAI%2C%20and%20it%20was%20brilliant%21%20It%27s%20free%20for%20open%20source%20and%20has%20a%20free%20trial%20for%20private%20code.%20Check%20it%20out%20https%3A//sourcery.ai)\n- [Mastodon](https://mastodon.social/share?text=I%20just%20got%20an%20instant%20code%20review%20from%20%40SourceryAI%2C%20and%20it%20was%20brilliant%21%20It%27s%20free%20for%20open%20source%20and%20has%20a%20free%20trial%20for%20private%20code.%20Check%20it%20out%20https%3A//sourcery.ai)\n- [LinkedIn](https://www.linkedin.com/sharing/share-offsite/?url=https://sourcery.ai)\n- [Facebook](https://www.facebook.com/sharer/sharer.php?u=https://sourcery.ai)\n\n</details>\n\n<sub>\nHelp me be more useful! Please click üëç or üëé on each comment and I'll use the feedback to improve your reviews.\n</sub>",
  "code_comments": [
    {
      "body": "**suggestion:** Filter out empty CORS origins when splitting the comma-separated string.\n\nIf `CORS_ORIGINS` has a trailing or double comma, this will produce empty-string entries that get passed to the middleware. Consider filtering out empty values, e.g. `return [o.strip() for o in self.CORS_ORIGINS.split(',') if o.strip()]`.\n\n```suggestion\n    @property\n    def cors_origins_list(self) -> list[str]:\n        \"\"\"Split comma-separated CORS_ORIGINS into a list, filtering out empty values.\"\"\"\n        return [origin.strip() for origin in self.CORS_ORIGINS.split(\",\") if origin.strip()]\n```",
      "path": "backend/app/config.py",
      "line": 23,
      "author": "sourcery-ai[bot]",
      "created_at": "2026-02-28T21:14:45Z",
      "id": null
    },
    {
      "body": "**üö® suggestion (security):** Avoid hardcoding database credentials in the default `DATABASE_URL`.\n\nEven for dev defaults, storing real usernames/passwords in code can normalize this pattern and risks accidental use outside dev. Prefer a placeholder URL without real credentials, or derive the URL from separate env vars (user, password, host, db) at runtime.\n\n```suggestion\n    # Use placeholder values by default; override via environment variables in .env or the environment.\n    DATABASE_URL: str = \"postgresql+asyncpg://USER:PASSWORD@localhost:5432/statusboard\"\n```",
      "path": "backend/app/config.py",
      "line": 11,
      "author": "sourcery-ai[bot]",
      "created_at": "2026-02-28T21:14:45Z",
      "id": null
    },
    {
      "body": "**suggestion (testing):** Add tests for edge cases in `cors_origins_list` such as whitespace and empty values.\n\nCurrently we only assert basic splitting. Please also add cases for:\n- Values with spaces, e.g. `\"http://localhost:3000, http://localhost:3001\"`, to verify whitespace is stripped.\n- Empty entries from trailing or multiple commas, e.g. `\"http://localhost:3000,\"` or `\",\"`, and either ensure empty strings are filtered out or clearly document the behavior so `\"\"` doesn‚Äôt unintentionally appear in the allowed origins list.\n\nSuggested implementation:\n\n```python\nclass TestCorsOriginsListSplitsCommaSeparated:\n    \"\"\"cors_origins_list returns split list from comma-separated string.\"\"\"\n\n    def test_cors_origins_list_splits_comma_separated(\n        self, monkeypatch: pytest.MonkeyPatch\n    ) -> None:\n        monkeypatch.setenv(\"JWT_SECRET\", \"test-secret\")\n        monkeypatch.setenv(\"CORS_ORIGINS\", \"http://localhost:3000,http://localhost:3001\")\n\n        s = Settings(_env_file=None)  # type: ignore[call-arg]\n\n        assert s.cors_origins_list == [\n            \"http://localhost:3000\",\n            \"http://localhost:3001\",\n        ]\n\n    def test_cors_origins_list_strips_whitespace(\n        self, monkeypatch: pytest.MonkeyPatch\n    ) -> None:\n        \"\"\"Values with spaces are stripped.\"\"\"\n        monkeypatch.setenv(\"JWT_SECRET\", \"test-secret\")\n        monkeypatch.setenv(\n            \"CORS_ORIGINS\",\n            \"http://localhost:3000, http://localhost:3001\",\n        )\n\n        s = Settings(_env_file=None)  # type: ignore[call-arg]\n\n        assert s.cors_origins_list == [\n            \"http://localhost:3000\",\n            \"http://localhost:3001\",\n        ]\n\n    def test_cors_origins_list_ignores_empty_entries(\n        self, monkeypatch: pytest.MonkeyPatch\n    ) -> None:\n        \"\"\"Empty entries from trailing or multiple commas are ignored.\"\"\"\n        monkeypatch.setenv(\"JWT_SECRET\", \"test-secret\")\n\n        # Trailing comma\n        monkeypatch.setenv(\"CORS_ORIGINS\", \"http://localhost:3000,\")\n        s = Settings(_env_file=None)  # type: ignore[call-arg]\n\n        assert s.cors_origins_list == [\"http://localhost:3000\"]\n\n        # Multiple commas and empty-only value\n        monkeypatch.setenv(\"CORS_ORIGINS\", \",http://localhost:3000,,\")\n        s = Settings(_env_file=None)  # type: ignore[call-arg]\n\n        assert s.cors_origins_list == [\"http://localhost:3000\"]\n\n```\n\nTo make these tests pass, ensure the `Settings` implementation of `cors_origins_list`:\n1. Splits `CORS_ORIGINS` on commas.\n2. Strips surrounding whitespace from each entry.\n3. Filters out empty strings after stripping.\nA typical implementation would look like:\n```python\n@property\ndef cors_origins_list(self) -> list[str]:\n    if not self.CORS_ORIGINS:\n        return []\n    return [origin.strip() for origin in self.CORS_ORIGINS.split(\",\") if origin.strip()]\n```\nAdjust the attribute name (`CORS_ORIGINS` vs similar) to match your existing `Settings` model.",
      "path": "backend/tests/unit/test_config.py",
      "line": 49,
      "author": "sourcery-ai[bot]",
      "created_at": "2026-02-28T21:14:45Z",
      "id": null
    },
    {
      "body": "**suggestion (testing):** Consider also testing behavior when `JWT_SECRET` is present but empty or only whitespace.\n\nSince you already cover the missing case, please also add tests for `JWT_SECRET=\"\"` and `JWT_SECRET=\"   \"` so the expected behavior for empty/whitespace secrets is defined and guarded against regressions.\n\n```suggestion\nclass TestSettingsRaisesOnMissingJwtSecret:\n    \"\"\"ValidationError raised when JWT_SECRET is not set or invalid.\"\"\"\n\n    def test_settings_raises_on_missing_jwt_secret(self, monkeypatch: pytest.MonkeyPatch) -> None:\n        monkeypatch.delenv(\"JWT_SECRET\", raising=False)\n\n        with pytest.raises(ValidationError):\n            Settings(_env_file=None)  # type: ignore[call-arg]\n\n    def test_settings_raises_on_empty_jwt_secret(self, monkeypatch: pytest.MonkeyPatch) -> None:\n        monkeypatch.setenv(\"JWT_SECRET\", \"\")\n\n        with pytest.raises(ValidationError):\n            Settings(_env_file=None)  # type: ignore[call-arg]\n\n    def test_settings_raises_on_whitespace_jwt_secret(self, monkeypatch: pytest.MonkeyPatch) -> None:\n        monkeypatch.setenv(\"JWT_SECRET\", \"   \")\n\n        with pytest.raises(ValidationError):\n            Settings(_env_file=None)  # type: ignore[call-arg]\n```",
      "path": "backend/tests/unit/test_config.py",
      "line": 37,
      "author": "sourcery-ai[bot]",
      "created_at": "2026-02-28T21:14:46Z",
      "id": null
    }
  ]
}